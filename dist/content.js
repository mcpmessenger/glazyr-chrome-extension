(()=>{"use strict";function e(){const e=window.location.href,t=document.title,o=document.body?document.body.innerText.substring(0,5e3):"";chrome.runtime.sendMessage({type:"PAGE_CONTEXT",url:e,title:t,text:o},e=>{chrome.runtime.lastError?console.error("Error sending message:",chrome.runtime.lastError.message):console.log("Context sent to background:",e)})}function t(e){const t=e.target;let o={};if("INPUT"===t.tagName||"TEXTAREA"===t.tagName){const e=t;o={type:"INPUT_CHANGE",elementType:t.tagName,name:e.name||e.id,value:e.value,timestamp:Date.now()}}else if("FORM"===t.tagName&&"submit"===e.type){const e=t,n={};new FormData(e).forEach((e,t)=>{n[t]=e.toString()}),o={type:"FORM_SUBMIT",formId:e.id||e.name||"unnamed_form",formData:n,timestamp:Date.now()}}else"click"===e.type&&(o={type:"CLICK_EVENT",selector:t.tagName+(t.id?`#${t.id}`:"")+(t.className?`.${t.className.split(" ")[0]}`:""),timestamp:Date.now()});Object.keys(o).length>0&&(chrome.runtime.sendMessage({type:"USER_INPUT",details:o}),console.log("User input captured and sent:",o))}console.log("Glazyr Content Script injected."),"complete"===document.readyState||"interactive"===document.readyState?e():window.addEventListener("load",e),document.addEventListener("input",t,!0),document.addEventListener("submit",t,!0),document.addEventListener("click",t,!0),chrome.runtime.onMessage.addListener((e,t,o)=>{if("EXECUTE_ACTION"===e.type){const{action:t,selector:n}=e;console.log(`Executing action: ${t} on selector: ${n}`);try{const e=document.querySelector(n);e?("click"===t&&(e.click(),console.log(`Clicked element: ${n}`)),chrome.runtime.sendMessage({type:"ACTION_EXECUTED",action:t,selector:n,status:"success"})):console.error(`Element not found for selector: ${n}`)}catch(e){console.error(`Error executing action ${t}:`,e)}return o({status:"Action execution attempt complete"}),!0}}),window.addEventListener("load",function(){const e=document.createElement("button");e.id="mock-button",e.textContent="Glazyr Mock Button",e.style.position="fixed",e.style.bottom="10px",e.style.right="10px",e.style.zIndex="99999",e.style.padding="10px",e.style.backgroundColor="lightblue",e.onclick=()=>{alert("Glazyr Mock Button Clicked!"),console.log("Glazyr Mock Button Clicked!")},document.body.appendChild(e)})})();